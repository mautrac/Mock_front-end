{"ast":null,"code":"import _regeneratorRuntime from \"D:\\\\VTI\\\\6.Mock Project\\\\Mock\\\\Mock_front-end #2\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"D:\\\\VTI\\\\6.Mock Project\\\\Mock\\\\Mock_front-end #2\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"D:\\\\VTI\\\\6.Mock Project\\\\Mock\\\\Mock_front-end #2\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"D:\\\\VTI\\\\6.Mock Project\\\\Mock\\\\Mock_front-end #2\\\\src\\\\pages\\\\auth\\\\SignIn.js\";\n\nimport React, { useState } from \"react\";\nimport { Link, withRouter } from \"react-router-dom\";\nimport { Button, Card, CardBody, FormGroup, CustomInput, Modal, ModalBody, ModalFooter, ModalHeader } from \"reactstrap\";\nimport { FastField, Form, Formik } from \"formik\";\nimport { ReactstrapInput } from \"reactstrap-formik\";\nimport * as Yup from 'yup';\nimport LoginApi from \"../../api/LoginApi\";\nimport avatar from \"../../assets/img/avatars/avatar.jpg\";\nimport storage from \"../../Storage/Storage\";\nimport { toastr } from \"react-redux-toastr\";\nimport UserApi from \"../../api/UserApi\";\nimport { setUserLoginInfo, setTokenInfo } from \"../../redux/actions/UserLoginInfoActions\";\nimport { connect } from 'react-redux';\n\nvar showErrorNotification = function showErrorNotification(title, message) {\n  var options = {\n    timeOut: 3000,\n    showCloseButton: false,\n    progressBar: false,\n    position: \"top-right\"\n  }; // show notification\n\n  toastr.error(title, message, options);\n};\n\nvar SignIn = function SignIn(props) {\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      isOpenModal = _useState2[0],\n      setOpenModal = _useState2[1];\n\n  var _useState3 = useState(\"\"),\n      _useState4 = _slicedToArray(_useState3, 2),\n      email = _useState4[0],\n      setEmail = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      isDisableResendButton = _useState6[0],\n      setDisableResendButton = _useState6[1];\n\n  var resendEmailToActiveAccount = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              setDisableResendButton(true);\n              _context.next = 3;\n              return UserApi.resendEmailToActiveAccount(email);\n\n            case 3:\n              setDisableResendButton(false);\n\n            case 4:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function resendEmailToActiveAccount() {\n      return _ref.apply(this, arguments);\n    };\n  }(); // rememberMe\n\n\n  var _React$useState = React.useState(storage.isRememberMe()),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      checkedRememberMe = _React$useState2[0],\n      setCheckedRememberMe = _React$useState2[1];\n\n  return /*#__PURE__*/React.createElement(React.Fragment, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"text-center mt-4\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 9\n    }\n  }, \"Welcome to group management\"), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"lead\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 9\n    }\n  }, \"Sign in to your account to continue\")), /*#__PURE__*/React.createElement(Formik, {\n    initialValues: {\n      username: '',\n      password: ''\n    },\n    validationSchema: Yup.object({\n      username: Yup.string().min(6, 'Must be between 6 and 50 characters').max(50, 'Must be between 6 and 50 characters').required('Required'),\n      password: Yup.string().min(6, 'Must be between 6 and 50 characters').max(50, 'Must be between 6 and 50 characters').required('Required')\n    }),\n    onSubmit: /*#__PURE__*/function () {\n      var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(values) {\n        var result;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.prev = 0;\n                _context2.next = 3;\n                return LoginApi.login(values.username, values.password);\n\n              case 3:\n                result = _context2.sent;\n\n                // check user active\n                if (result.token === null || result.token === undefined) {\n                  setEmail(result.email);\n                  setOpenModal(true);\n                } else {\n                  // set remember me\n                  storage.setRememberMe(checkedRememberMe); // save token & UserInfo to storage\n\n                  storage.setToken(result.token);\n                  storage.setUserInfo(result.userName, result.email, result.firstName, result.lastName, result.role, result.status); // save token & UserInfo to redux\n\n                  props.setTokenInfo(result.token);\n                  props.setUserLoginInfo(result.userName, result.email, result.firstName, result.lastName, result.role, result.status); // redirect to home page\n\n                  props.history.push(\"/dashboard/default\");\n                }\n\n                _context2.next = 10;\n                break;\n\n              case 7:\n                _context2.prev = 7;\n                _context2.t0 = _context2[\"catch\"](0);\n\n                if (_context2.t0.status === 401) {\n                  // show error notification\n                  showErrorNotification(\"Login Fail!\", \"Wrong Username or Password!\");\n                } else {\n                  // redirect page error server\n                  // đang lỗi ở đây\n                  props.history.push(\"/dashboard/default\"); // props.history.push(\"/auth/500\");\n                }\n\n              case 10:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, null, [[0, 7]]);\n      }));\n\n      return function (_x) {\n        return _ref2.apply(this, arguments);\n      };\n    }(),\n    validateOnChange: false,\n    validateOnBlur: false,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }\n  }, function (_ref3) {\n    var isSubmitting = _ref3.isSubmitting;\n    return /*#__PURE__*/React.createElement(Card, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(CardBody, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"m-sm-4\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"text-center\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: avatar,\n      alt: \"Chris Wood\",\n      className: \"img-fluid rounded-circle\",\n      width: \"132\",\n      height: \"132\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 19\n      }\n    })), /*#__PURE__*/React.createElement(Form, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(FormGroup, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(FastField, {\n      label: \"Username\",\n      type: \"text\",\n      bsSize: \"lg\",\n      name: \"username\",\n      placeholder: \"Enter your username\",\n      component: ReactstrapInput,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(FormGroup, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(FastField, {\n      label: \"Password\",\n      type: \"password\",\n      bsSize: \"lg\",\n      name: \"password\",\n      placeholder: \"Enter password\",\n      component: ReactstrapInput,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(\"small\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      to: \"/auth/reset-password\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 23\n      }\n    }, \"Forgot password?\"))), /*#__PURE__*/React.createElement(\"div\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(CustomInput, {\n      type: \"checkbox\",\n      id: \"rememberMe\",\n      label: \"Remember me next time\",\n      defaultChecked: checkedRememberMe,\n      onChange: function onChange() {\n        return setCheckedRememberMe(!checkedRememberMe);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"text-center mt-3\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      type: \"submit\",\n      color: \"primary\",\n      size: \"lg\",\n      disabled: isSubmitting,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 21\n      }\n    }, \"Sign in\"))))));\n  }), /*#__PURE__*/React.createElement(Modal, {\n    isOpen: isOpenModal,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(ModalHeader, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 9\n    }\n  }, \"You need to active your account\"), /*#__PURE__*/React.createElement(ModalBody, {\n    className: \"m-3\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"mb-0\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 11\n    }\n  }, \"Your account is not active.\"), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"mb-0\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 11\n    }\n  }, \"Please check your email (\", /*#__PURE__*/React.createElement(\"b\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 38\n    }\n  }, email), \") to active account.\")), /*#__PURE__*/React.createElement(ModalFooter, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 224,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    color: \"primary\",\n    onClick: resendEmailToActiveAccount,\n    disabled: isDisableResendButton,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 11\n    }\n  }, \"Resend\"), \" \", /*#__PURE__*/React.createElement(Button, {\n    color: \"primary\",\n    onClick: function onClick() {\n      return setOpenModal(false);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 229,\n      columnNumber: 11\n    }\n  }, \"Close\"))));\n};\n\nexport default withRouter(connect(null, {\n  setUserLoginInfo: setUserLoginInfo,\n  setTokenInfo: setTokenInfo\n})(SignIn));","map":{"version":3,"sources":["D:/VTI/6.Mock Project/Mock/Mock_front-end #2/src/pages/auth/SignIn.js"],"names":["React","useState","Link","withRouter","Button","Card","CardBody","FormGroup","CustomInput","Modal","ModalBody","ModalFooter","ModalHeader","FastField","Form","Formik","ReactstrapInput","Yup","LoginApi","avatar","storage","toastr","UserApi","setUserLoginInfo","setTokenInfo","connect","showErrorNotification","title","message","options","timeOut","showCloseButton","progressBar","position","error","SignIn","props","isOpenModal","setOpenModal","email","setEmail","isDisableResendButton","setDisableResendButton","resendEmailToActiveAccount","isRememberMe","checkedRememberMe","setCheckedRememberMe","username","password","object","string","min","max","required","values","login","result","token","undefined","setRememberMe","setToken","setUserInfo","userName","firstName","lastName","role","status","history","push","isSubmitting"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport { Link, withRouter } from \"react-router-dom\";\n\nimport {\n  Button,\n  Card,\n  CardBody,\n  FormGroup,\n  CustomInput,\n  Modal,\n  ModalBody,\n  ModalFooter,\n  ModalHeader,\n} from \"reactstrap\";\n\nimport { FastField, Form, Formik } from \"formik\";\nimport { ReactstrapInput } from \"reactstrap-formik\";\nimport * as Yup from 'yup';\nimport LoginApi from \"../../api/LoginApi\";\n\nimport avatar from \"../../assets/img/avatars/avatar.jpg\";\nimport storage from \"../../Storage/Storage\";\nimport { toastr } from \"react-redux-toastr\";\nimport UserApi from \"../../api/UserApi\";\n\nimport { setUserLoginInfo, setTokenInfo } from \"../../redux/actions/UserLoginInfoActions\";\nimport { connect } from 'react-redux';\n\nconst showErrorNotification = (title, message) => {\n  const options = {\n    timeOut: 3000,\n    showCloseButton: false,\n    progressBar: false,\n    position: \"top-right\"\n  };\n\n  // show notification\n  toastr.error(title, message, options);\n}\n\nconst SignIn = (props) => {\n  const [isOpenModal, setOpenModal] = useState(false);\n\n  const [email, setEmail] = useState(\"\");\n\n  const [isDisableResendButton, setDisableResendButton] = useState(false);\n\n  const resendEmailToActiveAccount = async () => {\n    setDisableResendButton(true);\n    await UserApi.resendEmailToActiveAccount(email);\n    setDisableResendButton(false);\n  }\n\n  // rememberMe\n  const [checkedRememberMe, setCheckedRememberMe] = React.useState(storage.isRememberMe());\n\n  return (\n    <React.Fragment>\n      <div className=\"text-center mt-4\">\n        <h2>Welcome to group management</h2>\n        <p className=\"lead\">Sign in to your account to continue</p>\n      </div>\n\n      <Formik\n        initialValues={\n          {\n            username: '',\n            password: ''\n          }\n        }\n        validationSchema={\n          Yup.object({\n            username: Yup.string()\n              .min(6, 'Must be between 6 and 50 characters')\n              .max(50, 'Must be between 6 and 50 characters')\n              .required('Required'),\n\n            password: Yup.string()\n              .min(6, 'Must be between 6 and 50 characters')\n              .max(50, 'Must be between 6 and 50 characters')\n              .required('Required')\n          })\n        }\n\n        onSubmit={\n          async (values) => {\n            try {\n              // call api\n              const result = await LoginApi.login(\n                values.username,\n                values.password\n              );\n\n              // check user active\n              if (result.token === null || result.token === undefined) {\n                setEmail(result.email);\n                setOpenModal(true);\n\n              } else {\n                // set remember me\n                storage.setRememberMe(checkedRememberMe);\n\n                // save token & UserInfo to storage\n                storage.setToken(result.token);\n                storage.setUserInfo(\n                  result.userName,\n                  result.email,\n                  result.firstName,\n                  result.lastName,\n                  result.role,\n                  result.status);\n\n                // save token & UserInfo to redux\n                props.setTokenInfo(result.token);\n                props.setUserLoginInfo(\n                  result.userName,\n                  result.email,\n                  result.firstName,\n                  result.lastName,\n                  result.role,\n                  result.status)\n\n                // redirect to home page\n                props.history.push(\"/dashboard/default\");\n              }\n\n            } catch (error) {\n              if (error.status === 401) {\n                // show error notification\n                showErrorNotification(\"Login Fail!\", \"Wrong Username or Password!\")\n              } else {\n                // redirect page error server\n                // đang lỗi ở đây\n                props.history.push(\"/dashboard/default\");\n\n                // props.history.push(\"/auth/500\");\n              }\n            }\n          }\n        }\n      validateOnChange={false}\n      validateOnBlur={false}\n      >\n        {({ isSubmitting }) => (\n          <Card>\n            <CardBody>\n              <div className=\"m-sm-4\">\n                <div className=\"text-center\">\n                  <img\n                    src={avatar}\n                    alt=\"Chris Wood\"\n                    className=\"img-fluid rounded-circle\"\n                    width=\"132\"\n                    height=\"132\"\n                  />\n                </div>\n                <Form>\n\n                  <FormGroup>\n                    <FastField\n                      label=\"Username\"\n                      type=\"text\"\n                      bsSize=\"lg\"\n                      name=\"username\"\n                      placeholder=\"Enter your username\"\n                      component={ReactstrapInput}\n                    />\n                  </FormGroup>\n\n                  <FormGroup>\n                    <FastField\n                      label=\"Password\"\n                      type=\"password\"\n                      bsSize=\"lg\"\n                      name=\"password\"\n                      placeholder=\"Enter password\"\n                      component={ReactstrapInput}\n                    />\n                    <small>\n                      <Link to=\"/auth/reset-password\">Forgot password?</Link>\n                    </small>\n                  </FormGroup>\n\n                  {/* Remember me */}\n                  <div>\n                    <CustomInput\n                      type=\"checkbox\"\n                      id=\"rememberMe\"\n                      label=\"Remember me next time\"\n                      defaultChecked={checkedRememberMe}\n                      onChange={() => setCheckedRememberMe(!checkedRememberMe)}\n                    />\n                  </div>\n\n                  {/* submit */}\n                  <div className=\"text-center mt-3\">\n                    <Button type='submit' color=\"primary\" size=\"lg\" disabled={isSubmitting}>\n                      Sign in\n                  </Button>\n                  </div>\n                </Form>\n              </div>\n            </CardBody>\n          </Card>\n        )}\n      </Formik>\n\n      <Modal isOpen={isOpenModal}>\n\n        {/* header */}\n        <ModalHeader>You need to active your account</ModalHeader>\n\n        {/* body */}\n        <ModalBody className=\"m-3\">\n          <p className=\"mb-0\">\n            Your account is not active.\n          </p>\n          <p className=\"mb-0\">\n            Please check your email (<b>{email}</b>) to active account.\n          </p>\n        </ModalBody>\n\n        {/* footer */}\n        <ModalFooter>\n          <Button color=\"primary\" onClick={resendEmailToActiveAccount} disabled={isDisableResendButton}>\n            Resend\n          </Button>{\" \"}\n\n          <Button color=\"primary\" onClick={() => setOpenModal(false)}>\n            Close\n          </Button>\n\n        </ModalFooter>\n      </Modal>\n\n    </React.Fragment>\n  )\n};\n\nexport default withRouter(connect(null, { setUserLoginInfo, setTokenInfo })(SignIn));"]},"metadata":{},"sourceType":"module"}